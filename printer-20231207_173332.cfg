#####################################################################
# 	Hardware
#####################################################################

[include steppers.cfg]
#[include calibrate_z.cfg]
[include kiauh_macros.cfg]
[include probing.cfg]
[include heaters_fans.cfg]
[include input_shaper.cfg]
[include Tool_Head.cfg]
[include Fan_Monitor.cfg]

#####################################################################
# 	Macros
#####################################################################

#[include klicky_probe.cfg]
[include bedfans_dualcontrol.cfg]
[include nozzle_scrub.cfg]
[include stealthburner_leds.cfg]
[include macros.cfg]
[include bed_mesh.cfg]
[include pause_resume.cfg]
[include print_macros.cfg]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
[include Line_Purge.cfg]
[include K-ShakeTune/*.cfg]

#####################################################################
# 	Kinematics
#####################################################################

[printer]
kinematics: corexy
max_velocity: 1000
max_accel: 6000		#Max 4000
max_accel_to_decel: 3000
max_z_velocity: 15 			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 5.0

[beacon]
serial: /dev/serial/by-id/usb-Beacon_Beacon_RevD_D50F920C4E4B333448202020FF0A0E24-if00
x_offset: 0 # update with offset from nozzle on your machine
y_offset: 21.953 # update with offset from nozzle on your machine
mesh_main_direction: x
mesh_runs: 2

[homing_override]
axes: xyz
set_position_z: 0
gcode:
  G1 Z10 F600
  G28 X
  G0 X175 F10000
  G28 Y
  G0 X175 Y175 F10000
  G28 Z

#[safe_z_home]
#home_xy_position: 175, 175 # update for your machine
#z_hop: 3

[respond]

[idle_timeout]
timeout: 14400

[virtual_sdcard]
path: ~/gcode_files

[display_status]

[pause_resume]

[exclude_object]

#[filament_switch_sensor filament_sensor]
#switch_pin: ^PG12
#pause_on_runout: True
#insert_gcode:
#    M117 Insert Detected
#runout_gcode:
#    M117 Runout Detected

[filament_motion_sensor filament_sensor]
switch_pin: ^PG12
pause_on_runout: True
detection_length: 10
extruder: extruder
runout_gcode: sensor_runout

[gcode_macro sensor_runout]
gcode:
    { action_respond_info("Filament Runout") }

#####################################################################
#   LED Control
#####################################################################

## Chamber Lighting - HE2 Connector (Optional)
[output_pin caselight]
pin: PA2
pwm:true
shutdown_value: 0
value:1
cycle_time: 0.001

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 38.838
#*# pid_ki = 1.221
#*# pid_kd = 308.765
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 23.623
#*# pid_ki = 2.316
#*# pid_kd = 60.238
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.057782, 0.064743, 0.068392, 0.072272, 0.078113, 0.083083, 0.089371, 0.093910, 0.097860, 0.101124, 0.102246, 0.100184, 0.098978, 0.097930, 0.098911, 0.093695, 0.101311, 0.100703, 0.096090, 0.098392, 0.092773, 0.087419, 0.094604, 0.086442, 0.082114, 0.083028, 0.079562, 0.074132, 0.069623, 0.066507
#*# 	  0.055926, 0.059961, 0.064496, 0.066596, 0.071872, 0.076595, 0.081297, 0.085623, 0.090592, 0.092001, 0.094246, 0.094188, 0.093456, 0.092776, 0.097303, 0.091324, 0.094369, 0.099201, 0.091513, 0.090312, 0.090321, 0.084854, 0.084103, 0.082773, 0.076757, 0.076079, 0.077608, 0.066442, 0.070196, 0.062414
#*# 	  0.051504, 0.055960, 0.059817, 0.060955, 0.068412, 0.072026, 0.076264, 0.080459, 0.082664, 0.086446, 0.087592, 0.088972, 0.089041, 0.087851, 0.089217, 0.088741, 0.093107, 0.091659, 0.088841, 0.089149, 0.082750, 0.077655, 0.081512, 0.074231, 0.070982, 0.069551, 0.067759, 0.063713, 0.060454, 0.057981
#*# 	  0.049275, 0.052292, 0.055434, 0.059941, 0.065878, 0.070989, 0.073688, 0.075756, 0.078824, 0.082010, 0.085027, 0.086705, 0.086760, 0.085326, 0.088130, 0.084135, 0.088375, 0.090419, 0.085910, 0.082339, 0.079904, 0.076971, 0.077250, 0.074147, 0.068456, 0.068320, 0.064738, 0.054670, 0.058706, 0.055602
#*# 	  0.046717, 0.049489, 0.054339, 0.057160, 0.065125, 0.070174, 0.073829, 0.073365, 0.076048, 0.079548, 0.080828, 0.082582, 0.082981, 0.081682, 0.081047, 0.082284, 0.086289, 0.084067, 0.082231, 0.081814, 0.074495, 0.070300, 0.074999, 0.068183, 0.064451, 0.062378, 0.059114, 0.054941, 0.054988, 0.053201
#*# 	  0.045397, 0.049352, 0.053634, 0.057949, 0.064519, 0.067926, 0.073786, 0.073255, 0.075083, 0.077544, 0.078513, 0.079288, 0.079793, 0.079778, 0.081848, 0.075273, 0.080475, 0.081845, 0.075288, 0.075173, 0.075138, 0.070516, 0.071195, 0.068659, 0.059399, 0.059791, 0.060928, 0.051723, 0.055512, 0.055552
#*# 	  0.040091, 0.045192, 0.052485, 0.054117, 0.061983, 0.067123, 0.071011, 0.070579, 0.072734, 0.073635, 0.073678, 0.075350, 0.075074, 0.074289, 0.075060, 0.073884, 0.075247, 0.075008, 0.072646, 0.073558, 0.070038, 0.065569, 0.068175, 0.062478, 0.057818, 0.055610, 0.056176, 0.054627, 0.056124, 0.055646
#*# 	  0.037798, 0.041702, 0.046996, 0.052749, 0.059432, 0.063858, 0.067797, 0.069028, 0.070624, 0.072179, 0.072273, 0.072143, 0.072240, 0.070119, 0.074789, 0.068237, 0.072113, 0.072798, 0.069084, 0.069337, 0.067678, 0.063874, 0.064468, 0.060909, 0.053830, 0.056414, 0.057519, 0.051736, 0.059819, 0.057465
#*# 	  0.031646, 0.037420, 0.046428, 0.047748, 0.056331, 0.060079, 0.063595, 0.066258, 0.066541, 0.068169, 0.067810, 0.066218, 0.065740, 0.063913, 0.065300, 0.065681, 0.066407, 0.066349, 0.064192, 0.064966, 0.061264, 0.057901, 0.060033, 0.054659, 0.052000, 0.050601, 0.051128, 0.052388, 0.056305, 0.053339
#*# 	  0.024416, 0.030348, 0.037482, 0.043500, 0.050370, 0.053742, 0.057480, 0.059493, 0.062536, 0.063070, 0.061150, 0.061661, 0.056197, 0.054901, 0.058901, 0.053710, 0.055234, 0.057056, 0.054694, 0.054165, 0.054286, 0.052472, 0.055548, 0.052125, 0.047304, 0.049937, 0.050556, 0.047730, 0.052200, 0.048790
#*# 	  0.016968, 0.022566, 0.031498, 0.035418, 0.041288, 0.045195, 0.049708, 0.051558, 0.051468, 0.053787, 0.051944, 0.049214, 0.045460, 0.043621, 0.041358, 0.039315, 0.041404, 0.041261, 0.039752, 0.043391, 0.041831, 0.041133, 0.048101, 0.047216, 0.047237, 0.046513, 0.046416, 0.044475, 0.042017, 0.037338
#*# 	  0.007811, 0.013015, 0.021064, 0.025873, 0.031541, 0.035754, 0.040238, 0.041393, 0.043510, 0.044050, 0.042201, 0.041634, 0.034874, 0.030295, 0.031400, 0.024638, 0.026126, 0.027380, 0.026837, 0.027986, 0.029847, 0.032973, 0.038759, 0.043184, 0.047568, 0.047915, 0.045136, 0.034524, 0.033229, 0.023514
#*# 	  0.002833, 0.007728, 0.013914, 0.017687, 0.023431, 0.028551, 0.032430, 0.033730, 0.034288, 0.035723, 0.033680, 0.031310, 0.027467, 0.022237, 0.019279, 0.016269, 0.015854, 0.015102, 0.016504, 0.019129, 0.018050, 0.021652, 0.033179, 0.038822, 0.045840, 0.047251, 0.040583, 0.029019, 0.018607, 0.012386
#*# 	  -0.003457, 0.000593, 0.005793, 0.011018, 0.016946, 0.020479, 0.024391, 0.026530, 0.026799, 0.028232, 0.026919, 0.023501, 0.019529, 0.016110, 0.015214, 0.007862, 0.008245, 0.009321, 0.006719, 0.006701, 0.010470, 0.013418, 0.023367, 0.034350, 0.041259, 0.044113, 0.035654, 0.016968, 0.009789, 0.000756
#*# 	  -0.005619, -0.000577, 0.006094, 0.009045, 0.014215, 0.017586, 0.020635, 0.021728, 0.022668, 0.023070, 0.020102, 0.019563, 0.016884, 0.012673, 0.010812, 0.007995, 0.006489, 0.004085, 0.002999, 0.001281, 0.002916, 0.005843, 0.016808, 0.025599, 0.033092, 0.034632, 0.025947, 0.013150, 0.001360, -0.006487
#*# 	  -0.008359, -0.002755, 0.004277, 0.007466, 0.013452, 0.015073, 0.016657, 0.017631, 0.018758, 0.018915, 0.017596, 0.016221, 0.012120, 0.011047, 0.010303, 0.007401, 0.006532, 0.004143, 0.000597, -0.003469, -0.003133, 0.001743, 0.007849, 0.015015, 0.020961, 0.021534, 0.013240, 0.001396, -0.004960, -0.009763
#*# 	  -0.007917, -0.001637, 0.004944, 0.010824, 0.016268, 0.017108, 0.018174, 0.016568, 0.017567, 0.019209, 0.016772, 0.015851, 0.013759, 0.011265, 0.012134, 0.011345, 0.009868, 0.006048, 0.001334, -0.003216, -0.004640, -0.003435, 0.004795, 0.007062, 0.009151, 0.009204, 0.003469, -0.002259, -0.008891, -0.011971
#*# 	  -0.008738, -0.002926, 0.006047, 0.012205, 0.017442, 0.018117, 0.019116, 0.017538, 0.017953, 0.018979, 0.017213, 0.015914, 0.013832, 0.013111, 0.012806, 0.011607, 0.012669, 0.007126, 0.002194, -0.003548, -0.003561, -0.003749, -0.001069, 0.001454, -0.000052, 0.000699, -0.003490, -0.012230, -0.012104, -0.016171
#*# 	  -0.008560, -0.001438, 0.006519, 0.011514, 0.016984, 0.017972, 0.018787, 0.016808, 0.016331, 0.016463, 0.015788, 0.015217, 0.014252, 0.012889, 0.013386, 0.012995, 0.011579, 0.006668, 0.002106, -0.003316, -0.003876, -0.004726, -0.001786, -0.004090, -0.002598, -0.004164, -0.008936, -0.011174, -0.014096, -0.018977
#*# tension = 0.2
#*# min_x = 85.0007
#*# algo = bicubic
#*# y_count = 19
#*# mesh_y_pps = 2
#*# min_y = 125.0
#*# x_count = 30
#*# max_y = 225.0
#*# mesh_x_pps = 2
#*# max_x = 264.999
#*#
#*# [beacon model default]
#*# model_coef = 1.4721359030697174,
#*# 	  1.794507268463867,
#*# 	  0.7715824614025596,
#*# 	  0.403254919946856,
#*# 	  0.2544158560208189,
#*# 	  0.08165570991141129,
#*# 	  -0.06327085377671467,
#*# 	  0.12468652244991917,
#*# 	  0.16530038253825266,
#*# 	  -0.0026631093398775114
#*# model_domain = 3.2057090540861464e-07,3.3484245970902907e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 60.221538
#*# model_offset = -0.88000
